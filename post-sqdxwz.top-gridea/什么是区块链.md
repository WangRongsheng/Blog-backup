# 区块链 = 区块 + 链

## 区块

我们假设自己生活在一个村子里，在这个村子，**没有实体货币的存在** ，一切交易靠大家记账：

比如，小明是一个卖肉的男孩，有一天老王找小明买了100块钱的肉，于是，老王和小明广播告诉大家`老王账目-100 ，小明账目+100` ，这时候大家就会拿出自己的账本来记录上这一笔交易信息。

<center><img src="https://s1.ax1x.com/2020/04/14/Gx87kV.png" alt="Gx87kV.png" border="0" /></center>

> 刚开始，我不明白为什么大家会记录`老王` 和 `小明` 的交易记录，后来，当我再看到**没有实体货币存在** ，我们就应该明白，这个村子每一次的交易都应该被所有人记录，不然下一次的交易是无法完成，甚至是乱套的！

> 举个例子，假设这次`老王` 和 `小明` 的交易未被其他人记录，那么下次消费，大家仍然觉得老王还有100块，老王仍然可以花费这100块，这是赤裸裸的犯罪啊！（偷钱消费）；小明明明拥有100块，却不被大家认可，成为了所谓的被害者~

后来大家发现，随时都在记账是一件非常麻烦的事情，并且大部分的账目和自己无关，于是决定让村长暂时充当记账先生，此后该村子的任何交易都由记账先生（村长）记录，记账先生每天下午的时候都会清算今天的账目并且将这个账目公布出去，供大家检查有没有问题，如果大家公认今天的账目没有问题，就会拿出纸笔抄一份各自带回家，并且写上今天的日期保存起来，这样的话就免去了每个人都在无时无刻记账的麻烦。

<center><img src="https://s1.ax1x.com/2020/04/14/GxGk1e.png" alt="GxGk1e.png" border="0" /></center>

按照这个逻辑，这个村子每天都会生成一个账本，例如：2.10日账本、2.11日账本、2.12日账本等等，因为每个账本都是独立存在的，所以每个账本都可以看作成一个**区块** ：

- 2.10日账本->区块1
- 2.11日账本->区块2
- 2.12日账本->区块3

<center><img src="https://s1.ax1x.com/2020/04/14/GxGMh8.png" alt="GxGMh8.png" border="0" /></center>

<center><img src="https://s1.ax1x.com/2020/04/14/GxGdhT.png" alt="GxGdhT.png" border="0" /></center>

区块可以简单粗暴的理解为多条账目的打包，如果是一天公布一次账目，那么今天的所有账目就可以打包为一个**区块** ，当然在这里区块的打包时间是可以改变的，比如十分钟打包一次或者指定时间打包一次，对应的就是十分钟生成一个区块...而**链** 就是将相邻的子帐本联系起来。

<center><img src="https://s1.ax1x.com/2020/04/14/GxGHHI.png" alt="GxGHHI.png" border="0" /></center>

## 链

就这样，记账先生每天进行循环的记账、清算、公布。每天进行账目的公布之后，会出现一个**期末余额** ：老王原有1000块，今日打工+150，买肉-100，买酒-20，那么他的期末余额为1030块。

<center><img src="https://s1.ax1x.com/2020/04/14/GxJFU0.png" alt="GxJFU0.png" border="0" /></center>

由此，记账先生根据每个人的交易算出每个人的期末余额，到了第二天开始记账的时候，记账先生就会在账本的开端写下大家昨天的余额作为期初余额，今天的交易将会基于昨天的余额。因为昨天的账目和今天的账目是存在联系的，我们可以理解为通过结转余额的方式联系在了一起，而这个余额也自然而然的充当将两个账本连接在一起的链条，也就是类似区块链中的链。

<center><img src="https://s1.ax1x.com/2020/04/14/GxJlUx.png" alt="GxJlUx.png" border="0" /></center>

## 共识机制

但是这个时候突然出现了一个问题，那就是记账先生一直在忙着记账，他的收入来自于哪里呢？没有收入就自然没有人想做记账先生，于是大家商议，每完成一次交易，都将给记账先生1块作为报酬，而这1块也是交易的手续费，目的是用来养活记账先生的。

<center><img src="https://s1.ax1x.com/2020/04/14/GxJrPf.png" alt="GxJrPf.png" border="0" /></center>

如果每天该村子的交易数超过500，也就是记账先生每天的收入会达到500块，搬砖的老王对记账先生的收入眼红了，在这样之后，每个人都觉得记账先生的职位好，轻松还高新，大家都想做记账先生。于是大家想出了一种办法，通过抛硬币的方式来决定谁是今天的记账先生，大家觉得很合理，并最终达成共识。

<center><img src="https://s1.ax1x.com/2020/04/14/GxJ2rj.png" alt="GxJ2rj.png" border="0" /></center>

通过抛硬币选举记账先生的方法可以理解为一个选举机制，因为大家是共识的，所以被称为共识机制。在区块链中，我们便是通过**共识机制** 选出记账者。

<center><img src="https://s1.ax1x.com/2020/04/14/GxJ7zF.png" alt="GxJ7zF.png" border="0" /></center>

## P2P的网络路由

现在又出现了一个新的问题，那就是有的人家距离公布账目的地方比较远，不是很方便都到公告栏去抄账目怎么办？

<center><img src="https://s1.ax1x.com/2020/04/14/GxY9zD.png" alt="GxY9zD.png" border="0" /></center>

这很简单，他可以抄邻居的账目，邻居又可以抄邻居的账目，因为可以互相借阅，也就解决了，大量村民一起挤在公告栏旁复制账目的问题。而邻居抄邻居本质上是用户对用户，点对点的信息传播，而用户之间又可以相互联系，最终连接在一起形成一个网络，而这个信息传递的方式也就是区块链的网络路由方式：用户对用户，每个人既是信息的接收者，也是信息的传播者。而在这个信息的传递过程中村子里的每个人都被称为一个节点。

<center><img src="https://s1.ax1x.com/2020/04/14/GxYLp8.png" alt="GxYLp8.png" border="0" /></center>

## 去中心化（难以篡改）

如果现在有人想要篡改这个账本呢？难度其实是很大的，因为每个人的手里都有一个账本，如果想要改变账本数据就意味着需要将每个人手中的账本都改一遍。现实中，账本通过由少数人集中管理，很容易就会进行修改，但在这个村子，因为每个人都有一个每天同步的账本，而且每个人拿到的都一样，并且没有集中的现象，也就是**去中心化** ,因此我们可以说在这个此村子，账本是分布式账本。

<center><img src="https://s1.ax1x.com/2020/04/14/GxthCV.png" alt="GxthCV.png" border="0" /></center>

<center><img src="https://s1.ax1x.com/2020/04/14/Gxtm7R.png" alt="Gxtm7R.png" border="0" /></center>

# 区块链特征

1. P2P网络路由；
2. 分布式账本；
3. 共识机制；
4. 难以篡改；

<center><img src="https://s1.ax1x.com/2020/04/14/GxtjC6.png" alt="GxtjC6.png" border="0" /></center>

<center><img src="https://s1.ax1x.com/2020/04/14/GxN9DH.png" alt="GxN9DH.png" border="0" /></center>